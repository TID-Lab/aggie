<table aggie-table ng-show="pagination.total > 0">
  <thead>
    <tr>
      <th>Time</th>
      <th>Media</th>
      <th>Source</th>
      <th>Author</th>
      <th>Content</th>
      <th>Incident</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="r in visibleReports.toArray() | orderBy:'-storedAt'" ng-class="{ item: true, flagged: r.flagged == true }">
      <td class="compact time">
        <div class="interval">
          <span class="interval-amount">{{ r.storedAt | interval }}</span> <span class="interval-relative">ago</span>
        </div>
        <div class="date-and-time">
          <span class="time">{{ r.storedAt | aggieDate:'time' }}</span>
          <span class="date">{{ r.storedAt | aggieDate:'date' }}</span>
        </div>
        <div class="created">{{ r | delay }}</div>
      </td>
      <td class="compact source" ng-class="sourceClass(r)">
        <div class="icon-left"></div>
      </td>
      <td class="compact source" ng-class="{ strong: !isFlagged(r) }">
        {{ sourcesById[r._source].nickname || '[Deleted]' }}
      </td>
      <td class="compact author" ng-class="{ strong: !isFlagged(r) }">
        {{ r.author }}
      </td>
      <td class="expand content" ng-class="{ strong: !isFlagged(r) }">
        <a href="reports/{{r._id}}">{{ (r.content || '[No Content]') | stripHtml }}</a>
      </td>
      <td class="compact incident text-center relative">
        <a ng-controller="IncidentSelectModalController" ng-show="incidentsById != null" ng-click="setIncident(r)">
          <strong ng-if="r._incident">{{ incidentsById[r._incident].title | strLimit: 40 }}</strong>
          <strong ng-if="!r._incident">Add</strong>
        </a>
        <a class="remove" ng-show="r._incident" ng-click="unlinkIncident(r)">x</a>
      </td>
      <td class="compact status text-center">
        <div ng-click="toggleFlagged(r)" class="fa pointer" ng-class="r.flagged == true ? 'fa-flag' : 'fa-flag-o'"></div>
      </td>
    </tr>
  </tbody>
</table>
