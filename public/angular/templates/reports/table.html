<table aggie-table ng-show="pagination.total > 0">
  <thead>
    <tr>
      <th></th>
      <th>Time</th>
      <th>Media</th>
      <th>Source</th>
      <th>Author</th>
      <th>Content</th>
      <th ng-hide="pageType == 'show-incident'">Incident</th><!-- No need to show incident on incident detail page -->
      <th>Flagged</th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="report in visibleReports.toArray() | orderBy:'-storedAt'" ng-class="{ item: true, 'bg-gray': report.read, flagged: report.flagged, unread: !report.read && !report.flagged }">
      <td><input ng-model="report.selected" type="checkbox" ng-model="report._id" /></td>
      <td class="compact time">
        <div class="interval">
          <span class="interval-amount">{{ report.storedAt | interval }}</span> <span class="interval-relative">ago</span>
        </div>
        <div class="date-and-time">
          <span class="time">{{ report.storedAt | aggieDate:'time' }}</span>
          <span class="date">{{ report.storedAt | aggieDate:'date' }}</span>
        </div>
        <div class="created">{{ report | delay }}</div>
      </td>
      <td class="compact source" ng-class="sourceClass(report)">
        <div class="icon-left"></div>
      </td>
      <td class="compact source" ng-class="{ strong: !isRead(report) }">
        {{ sourcesById[report._source].nickname || '[Deleted]' }}
      </td>
      <td class="compact author" ng-class="{ strong: !isRead(report) }">
        {{ report.author }}
      </td>
      <td class="expand content" ng-class="{ strong: !isRead(report) }">
        <a href="/reports/{{report._id}}">{{ (report.content || '[No Content]') | stripHtml }}</a>
      </td>
      <td class="expand incident text-center relative" ng-hide="pageType == 'show-incident'">
        <div ng-if="incidents.length">
          <a ng-controller="IncidentSelectModalController" ng-click="setIncident(report)" class="table-primary">
            <strong ng-if="report._incident">{{ incidentsById[report._incident].title | strLimit: 40 }}</strong>
            <strong ng-if="!report._incident">Add</strong>
          </a>
        </div>
        <div ng-if="!incidents.length">
          <a ng-controller="IncidentFormModalController" ng-click="create(report)" class="table-primary">
            <strong ng-if="!report._incident">Add</strong>
          </a>
        </div>
        <a class="remove" ng-show="report._incident" ng-click="unlinkIncident(report)">x</a>
      </td>
      <td class="flagged text-center">
        <div ng-click="toggleFlagged(report)" class="fa pointer" ng-class="report.flagged ? 'fa-flag' : 'fa-flag-o'"></div>
      </td>
    </tr>
  </tbody>
</table>
